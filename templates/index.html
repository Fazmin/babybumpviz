<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Baby Kick Visualizer</title>
    <link rel="stylesheet" href="/static/css/styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <header class="header">
            <div class="logo">
                <span class="logo-icon">üë∂</span>
                <span class="logo-text">Baby Kick Visualizer</span>
            </div>
            <nav class="header-nav">
                <a href="/technical" class="nav-link">üìö How It Works</a>
                <button class="theme-toggle" id="theme-toggle" aria-label="Toggle theme">
                    <span class="theme-icon-dark">üåô</span>
                    <span class="theme-icon-light">‚òÄÔ∏è</span>
                </button>
            </nav>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Landing Section -->
            <section id="landing-section" class="section active">
                <div class="hero">
                    <h1 class="hero-title">
                        <span class="gradient-text">Visualize</span> Your Baby's Movements
                    </h1>
                    <p class="hero-subtitle">
                        Advanced motion detection technology to capture and visualize 
                        those precious moments when your baby kicks. Transform your 
                        pregnancy videos into stunning heat map visualizations.
                    </p>
                    <div class="features-grid">
                        <div class="feature-card">
                            <div class="feature-icon">üéØ</div>
                            <h3>Smart Detection</h3>
                            <p>AI-powered algorithm distinguishes kicks from breathing</p>
                        </div>
                        <div class="feature-card">
                            <div class="feature-icon">üå°Ô∏è</div>
                            <h3>Heat Maps</h3>
                            <p>Beautiful topographical color overlays</p>
                        </div>
                        <div class="feature-card">
                            <div class="feature-icon">üìä</div>
                            <h3>Analytics</h3>
                            <p>Track kick frequency and intensity</p>
                        </div>
                    </div>
                </div>

                <!-- Upload Area -->
                <div class="upload-section">
                    <div class="upload-area" id="upload-area">
                        <div class="upload-icon">üìÅ</div>
                        <h3>Upload Your Video</h3>
                        <p>Drag & drop or click to browse</p>
                        <p class="upload-hint">Supports MP4, AVI, MOV</p>
                        <input type="file" id="video-input" accept="video/*" hidden>
                    </div>
                </div>
            </section>

            <!-- ROI Selection Section -->
            <section id="roi-section" class="section">
                <div class="section-header">
                    <h2>Select Region of Interest</h2>
                    <p>Draw a rectangle around the abdomen area</p>
                </div>
                
                <div class="video-info" id="video-info"></div>
                
                <div class="roi-container">
                    <canvas id="roi-canvas"></canvas>
                    <img id="preview-image" alt="Video preview">
                </div>
                
                <div class="controls-panel">
                    <div class="control-group">
                        <div class="label-row">
                            <label>Sensitivity</label>
                            <div class="info-icon">
                                ‚ìò
                                <span class="tooltip">How sensitive the detection is to small movements. Higher values detect even tiny movements but may pick up noise. Lower values only detect stronger movements. Start with 1.0 and adjust based on your video quality.</span>
                            </div>
                        </div>
                        <input type="range" id="sensitivity" min="0.5" max="3" step="0.1" value="1">
                        <span class="control-value" id="sensitivity-value">1.0</span>
                    </div>
                    <div class="control-group">
                        <div class="label-row">
                            <label>Magnitude Threshold</label>
                            <div class="info-icon">
                                ‚ìò
                                <span class="tooltip">The minimum movement required to count as a "kick". Think of it as a filter - movements below this are ignored. Higher = only strong kicks. Lower = subtle movements too. If kicks are being missed, try lowering this value.</span>
                            </div>
                        </div>
                        <input type="range" id="magnitude" min="0.5" max="5" step="0.25" value="2">
                        <span class="control-value" id="magnitude-value">2.0</span>
                    </div>
                    <div class="control-group">
                        <div class="label-row">
                            <label>Overlay Opacity</label>
                            <div class="info-icon">
                                ‚ìò
                                <span class="tooltip">How transparent or solid the colored heat map appears. 0.1 = almost invisible, mostly see original video. 0.9 = solid colors dominate. 0.5 is a good balance to see both the video and movement visualization.</span>
                            </div>
                        </div>
                        <input type="range" id="opacity" min="0.1" max="0.9" step="0.05" value="0.5">
                        <span class="control-value" id="opacity-value">0.5</span>
                    </div>
                    <div class="control-group">
                        <div class="label-row">
                            <label class="checkbox-label">
                                <input type="checkbox" id="show-contours" checked>
                                Show Contour Lines
                            </label>
                            <div class="info-icon">
                                ‚ìò
                                <span class="tooltip">Adds topographical lines around areas of similar movement intensity, like elevation lines on a map. Helps you see the "shape" of movement and pinpoint exactly where the kick happened.</span>
                            </div>
                        </div>
                    </div>
                    <div class="control-group">
                        <div class="label-row">
                            <label class="checkbox-label">
                                <input type="checkbox" id="show-vectors">
                                Show Motion Vectors
                            </label>
                            <div class="info-icon">
                                ‚ìò
                                <span class="tooltip">Shows small arrows indicating direction and speed of movement. Arrows point where skin is moving; longer arrows = faster movement. Helps distinguish outward kicks from general breathing motion.</span>
                            </div>
                        </div>
                    </div>
                    <div class="control-group">
                        <div class="label-row">
                            <label>Display Mode</label>
                            <div class="info-icon">
                                ‚ìò
                                <span class="tooltip"><b>Overlay:</b> Heat map on top of video - see kicks in context.<br><b>Side by Side:</b> Original next to heat map - good for comparison.<br><b>Heat Map Only:</b> Just the visualization - clearest view of movement patterns.</span>
                            </div>
                        </div>
                        <select id="display-mode">
                            <option value="overlay">Overlay</option>
                            <option value="side_by_side">Side by Side</option>
                            <option value="heatmap">Heat Map Only</option>
                        </select>
                    </div>
                </div>
                
                <div class="action-buttons">
                    <button class="btn btn-secondary" id="back-btn">‚Üê Back</button>
                    <button class="btn btn-primary" id="analyze-btn">üöÄ Start Analysis</button>
                </div>
            </section>

            <!-- Processing Section -->
            <section id="processing-section" class="section">
                <div class="processing-container">
                    <div class="processing-animation">
                        <div class="pulse-circle"></div>
                        <span class="processing-icon">üî¨</span>
                    </div>
                    <h2>Analyzing Video...</h2>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progress-fill"></div>
                    </div>
                    <p class="progress-text" id="progress-text">0%</p>
                    <p class="processing-hint">Detecting motion patterns and identifying kicks</p>
                </div>
            </section>

            <!-- Results Section -->
            <section id="results-section" class="section">
                <div class="section-header">
                    <h2>üéâ Analysis Complete</h2>
                </div>
                
                <!-- Statistics -->
                <div class="stats-grid" id="stats-grid">
                    <div class="stat-card">
                        <div class="stat-value" id="stat-kicks">0</div>
                        <div class="stat-label">Kicks Detected</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="stat-intensity">0.0</div>
                        <div class="stat-label">Avg Intensity</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="stat-confidence">0%</div>
                        <div class="stat-label">Avg Confidence</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="stat-duration">0s</div>
                        <div class="stat-label">Duration</div>
                    </div>
                </div>
                
                <!-- Video Player -->
                <div class="video-player-container">
                    <video id="result-video" controls></video>
                </div>
                
                <!-- Timeline -->
                <div class="timeline-container">
                    <div class="timeline-header">
                        <h3>Motion Timeline</h3>
                        <div class="graph-options">
                            <label class="graph-option">
                                <input type="checkbox" id="graph-show-grid" checked>
                                <span>Grid</span>
                            </label>
                            <label class="graph-option">
                                <input type="checkbox" id="graph-show-fill" checked>
                                <span>Fill</span>
                            </label>
                            <label class="graph-option">
                                <input type="checkbox" id="graph-show-kicks" checked>
                                <span>Kick Markers</span>
                            </label>
                            <label class="graph-option">
                                <input type="checkbox" id="graph-smooth" checked>
                                <span>Smooth</span>
                            </label>
                        </div>
                    </div>
                    <p class="timeline-hint">üí° Click on red kick markers to jump to that moment in the video</p>
                    <canvas id="timeline-canvas"></canvas>
                </div>
                
                <!-- Kick Events Table -->
                <div class="kicks-table-container">
                    <h3>Detected Kicks</h3>
                    <table class="kicks-table" id="kicks-table">
                        <thead>
                            <tr>
                                <th>#</th>
                                <th>Time</th>
                                <th>Intensity</th>
                                <th>Duration</th>
                                <th>Confidence</th>
                            </tr>
                        </thead>
                        <tbody id="kicks-tbody"></tbody>
                    </table>
                </div>
                
                <!-- Export Buttons -->
                <div class="export-buttons">
                    <button class="btn btn-export" id="export-video">üìπ Download Video</button>
                    <button class="btn btn-export" id="export-csv">üìä Export CSV</button>
                    <button class="btn btn-export" id="export-json">üìã Export JSON</button>
                </div>
                
                <div class="action-buttons">
                    <button class="btn btn-primary" id="new-analysis">üîÑ New Analysis</button>
                </div>
            </section>
        </main>

        <!-- Footer -->
        <footer class="footer">
            <p>Made with ‚ù§Ô∏è for expecting parents</p>
        </footer>
    </div>

    <script src="/static/js/app.js"></script>
</body>
</html>

